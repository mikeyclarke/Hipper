index:
    path: /
    controller: Hipper\Controller\DefaultController::index
    defaults:
        _before_middlewares:
            - app_onboarding_completed_middleware:before

tokenized_login.get:
    path: /tokenized-login
    methods: [GET]
    controller: Hipper\App\TokenizedLoginController::getAction
    defaults:
        unsecured: true

login.post:
    path: /_/login
    methods: [POST]
    controller: Hipper\App\LoginController::postAction
    defaults:
        unsecured: true
        _before_middlewares:
            - require_json_content_type_middleware:before

join.post:
    path: /_/join
    methods: [POST]
    controller: Hipper\App\JoinOrganizationController::postAction
    defaults:
        unsecured: true
        _before_middlewares:
            - require_json_content_type_middleware:before

join_by_invitation.get:
    path: /join/by-invitation
    methods: [GET]
    controller: Hipper\App\JoinByInvitationController::getAction
    defaults:
        unsecured: true

join_by_invitation.post:
    path: /_/join/by-invitation
    methods: [POST]
    controller: Hipper\App\JoinByInvitationController::postAction
    defaults:
        unsecured: true
        _before_middlewares:
            - require_json_content_type_middleware:before

welcome.get:
    path: /welcome
    methods: [GET]
    controller: Hipper\App\WelcomeController::getAction

create_team.get:
    path: /teams/new
    methods: [GET]
    controller: Hipper\App\Team\CreateTeamController::getAction

create_team_suggest_description.post:
    path: /_/suggest-team-description
    methods: [POST]
    controller: Hipper\App\Team\CreateTeamController::suggestAction
    defaults:
        _before_middlewares:
            - require_json_content_type_middleware:before

create_team.post:
    path: /_/create-team
    methods: [POST]
    controller: Hipper\App\Team\CreateTeamController::postAction
    defaults:
        _before_middlewares:
            - require_json_content_type_middleware:before

team.get:
    path: /team/{team_url_id}
    methods: [GET]
    controller: Hipper\App\Team\TeamController::getAction
    defaults:
        _before_middlewares:
            - team_model_from_url_id_middleware:before

team_docs.get:
    path: /team/{team_url_id}/docs
    methods: [GET]
    controller: Hipper\App\Team\TeamDocsController::getAction
    defaults:
        _before_middlewares:
            - team_model_from_url_id_middleware:before

create_project_section.get:
    path: /project/{project_url_id}/docs/new-section
    methods: [GET]
    controller: Hipper\App\Section\CreateSectionController::getAction
    defaults:
        knowledgebase_type: 'project'
        _before_middlewares:
            - project_model_from_url_id_middleware:before

create_team_section.get:
    path: /team/{team_url_id}/docs/new-section
    methods: [GET]
    controller: Hipper\App\Section\CreateSectionController::getAction
    defaults:
        knowledgebase_type: 'team'
        _before_middlewares:
            - team_model_from_url_id_middleware:before

create_section.post:
    path: /_/create-section
    methods: [POST]
    controller: Hipper\App\Section\CreateSectionController::postAction
    defaults:
        _before_middlewares:
            - require_json_content_type_middleware:before

team_docs_new.get:
    path: /team/{team_url_id}/docs/new
    methods: [GET]
    controller: Hipper\App\Document\CreateDocumentController::getAction
    defaults:
        knowledgebase_type: 'team'
        _before_middlewares:
            - team_model_from_url_id_middleware:before

project_docs_new.get:
    path: /project/{project_url_id}/docs/new
    methods: [GET]
    controller: Hipper\App\Document\CreateDocumentController::getAction
    defaults:
        knowledgebase_type: 'project'
        _before_middlewares:
            - project_model_from_url_id_middleware:before

doc_new.post:
    path: /_/create-doc
    methods: [POST]
    controller: Hipper\App\Document\CreateDocumentController::postAction
    defaults:
        _before_middlewares:
            - require_json_content_type_middleware:before

team_doc.get:
    path: /team/{team_url_id}/docs/{path}
    methods: [GET]
    controller: Hipper\App\DocumentOrSectionControllerRouter::route
    defaults:
        knowledgebase_type: 'team'
        action: 'getAction'
        _before_middlewares:
            - team_model_from_url_id_middleware:before
            - knowledgebase_routing_middleware:before
    requirements:
        route: '.+'

project_doc.get:
    path: /project/{project_url_id}/docs/{path}
    methods: [GET]
    controller: Hipper\App\DocumentOrSectionControllerRouter::route
    defaults:
        knowledgebase_type: 'project'
        action: 'getAction'
        _before_middlewares:
            - project_model_from_url_id_middleware:before
            - knowledgebase_routing_middleware:before
    requirements:
        route: '.+'

create_project.get:
    path: /projects/new
    methods: [GET]
    controller: Hipper\App\Project\CreateProjectController::getAction

create_project.post:
    path: /_/create-project
    methods: [POST]
    controller: Hipper\App\Project\CreateProjectController::postAction
    defaults:
        _before_middlewares:
            - require_json_content_type_middleware:before

project.get:
    path: /project/{project_url_id}
    methods: [GET]
    controller: Hipper\App\Project\ProjectController::getAction
    defaults:
        _before_middlewares:
            - project_model_from_url_id_middleware:before

project_docs.get:
    path: /project/{project_url_id}/docs
    methods: [GET]
    controller: Hipper\App\Project\ProjectDocsController::getAction
    defaults:
        _before_middlewares:
            - project_model_from_url_id_middleware:before
