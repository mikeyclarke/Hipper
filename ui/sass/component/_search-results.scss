@use 'component/base-list';
@use 'config/config';
@use 'helper/breakpoint';
@use 'helper/font-smoothing';
@use 'helper/unstyled-button';

$_x-offset-large-bp: 102px;

$_result-body-mark-color: config.config-get(color-shades, dark, 1000);
$_result-body-mark-gradient-color: #efdb23;
$_result-body-mark-gradient: linear-gradient(
    -100deg,
    rgba($_result-body-mark-gradient-color, .3),
    rgba($_result-body-mark-gradient-color, .7) 95%,
    rgba($_result-body-mark-gradient-color, .1)
);

$_more-button-background-color: #fafafc;
$_more-button-border-top-color: rgba(config.config-get(color-shades, grey, 400), .34);
$_more-button-focused-box-shadow: inset 0 0 0 3px config.config-get(color-shades, primary, 600);
$_more-button-color: config.config-get(color-shades, primary, 1000);
$_more-button-disabled-color: config.config-get(color-shades, primary, 400);
$_more-button-font-size: 16px;
$_more-button-font-weight: 600;
$_more-button-height: 46px;

.c-search-results {
    @extend %c-base-list;
    @extend %c-base-list--pad-bottom;

    @include breakpoint.breakpoint(app, medium) {
        background: transparent;
        box-shadow: none;
    }

    @include breakpoint.breakpoint(app, large) {
        margin-left: $_x-offset-large-bp;
    }
}

.c-search-results__result {
    @extend %c-base-list__item;
    @extend %c-base-list__item--with-avatar;

    @include breakpoint.breakpoint(app, medium) {
        margin-bottom: 24px;
        margin-left: -16px;
        width: calc(100% + 32px);
    }

    @include breakpoint.breakpoint(app, large) {
        margin-left: -48px + -16px;
        width: 530px + 48px + 32px;
    }
}

.c-search-results__result:not(:last-child)::after {
    @include breakpoint.breakpoint(app, medium) {
        display: none;
    }
}

.c-search-results__result:first-child {
    @include breakpoint.breakpoint(app, medium) {
        margin-top: -16px;
    }
}

.c-search-results__result-link {
    @extend %c-base-list__item-link;
}

.c-search-results__result-avatar {
    @extend %c-base-list__item-avatar;

    @include breakpoint.breakpoint(app, medium) {
        top: 16px;
    }
}

.c-search-results__result-owners {
    @extend %c-base-list__item-owners;
}

.c-search-results__result-owners-divider {
    @extend %c-base-list__item-owners-divider;
}

.c-search-results__result-owner {
    @extend %c-base-list__item-owner;
    @extend %c-base-list__item-owner--responsive;
}

.c-search-results__result-title {
    @extend %c-base-list__item-title;
    @extend %c-base-list__item-title--responsive;
}

.c-search-results__result-body {
    @extend %c-base-list__item-description;
    @extend %c-base-list__item-description--responsive;

    @include breakpoint.breakpoint(app, medium) {
        margin-bottom: 18px;
    }
}

.c-search-results__result-body mark {
    background-color: transparent;
    color: $_result-body-mark-color;
    background-image: $_result-body-mark-gradient;
    border-radius: 12px 0;
    padding: 0 2px;
}

.c-search-results__result-meta {
    @extend %c-base-list__item-timestamp;
    @extend %c-base-list__item-timestamp--responsive;
}

.c-search-results__result-title,
.c-search-results__result-owners,
.c-search-results__result-body,
.c-search-results__result-meta {
    @include breakpoint.breakpoint(app, medium) {
        margin-left: 48px !important;
    }
}

.c-search-results__more-button {
    @extend %unstyled-button;
    background-color: $_more-button-background-color;
    border-radius: 0 0 8px 8px;
    color: $_more-button-color;
    font-size: $_more-button-font-size;
    font-weight: $_more-button-font-weight;
    height: $_more-button-height;
    position: relative;
    transition: color .15s;
    width: 100%;
    @include font-smoothing.font-smoothing;

    @include breakpoint.breakpoint(app, medium) {
        border: 1px solid $_more-button-border-top-color;
        border-radius: 4px;
        margin-left: 48px;
        margin-top: 24px;
        width: 530px + 16px;
    }

    @include breakpoint.breakpoint(app, large) {
        margin-left: auto;
        width: 530px + 48px - 32px;
    }
}

.c-search-results__more-button:disabled {
    color: $_more-button-disabled-color;
}

.c-search-results__more-button:focus {
    box-shadow: $_more-button-focused-box-shadow;
    outline: 0;
}

.c-search-results__more-button::before {
    content: '';
    display: block;
    height: 1px;
    width: 100%;
    background-color: $_more-button-border-top-color;
    top: -1px;
    position: absolute;

    @include breakpoint.breakpoint(app, medium) {
        display: none;
    }
}
